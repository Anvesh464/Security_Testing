![](media/6bc9473b4b8bf246749f1ab20989c482.png)

**BOSTON \| SEATTLE**

**187 Ballardvale St. Suite A195 ●Wilmington, MA 01887● Ph: +1.978.694.1008**

[**getsecure@securityinnovation.com**](mailto:getsecure@securityinnovation.com)**●** [**www.securityinnovation.com**](http://www.securityinnovation.com)

![](media/6bc9473b4b8bf246749f1ab20989c482.png)

**BOSTON \| SEATTLE**

**187 Ballardvale St. Suite A195 ●Wilmington, MA 01887● Ph: +1.978.694.1008**

[**getsecure@securityinnovation.com**](mailto:getsecure@securityinnovation.com)**●** [**www.securityinnovation.com**](http://www.securityinnovation.com)

| **Document name:** | Patching Android Application |
|--------------------|------------------------------|
| **Author(s):**     | Dinesh Shetty                |

![SI-header-blue-gradient.jpg](media/2b36546d36cdcc725fb20382ec3c359e.jpeg)

# Contact Information

### Technical Contact

Dinesh Shetty

Senior Security Engineer

Email: [dinezh.shetty@gmail.com](mailto:dinezh.shetty@gmail.com)

# Test Configuration

The following is required to verify this issue:

-   Download the latest version of the Android-InsecureBankv2 apk from <https://github.com/dineshshetty/Android-InsecureBankv2>
-   Download Android SDK from <http://developer.android.com/sdk/index.html>.
-   Download the latest version of apktool from <http://ibotpeaches.github.io/Apktool/>. The installation guide can be found at <http://ibotpeaches.github.io/Apktool/install/>
-   Download the latest version of SignApk from <https://github.com/appium/sign>

# Test Steps

1.  Copy the InsecureBankv2.apk file to the “platform-tools” folder in the Android SDK and then use the below command to push the downloaded Android-InsecureBankv2 application to the emulator.

    ./adb install InsecureBankv2.apk

2.  ![](media/99c67ae5c7f169c7b18670200b8c5ac6.png)Launch the installed InsecureBankv2 application on the Emulator. The following screenshot shows the default screen available to a normal user after login.
1.  Copy the InsecureBankv2.apk into the “apktool” folder and enter the below command to decompile the application:

    ./apktool d InsecureBankv2.apk

    ![](media/8a53ffed80e04123916e4143b52099eb.png)

2.  Navigate to the folder \~/apktool/InsecureBankv2/res/values and open the file *strings.xml* for editing. Modify the value of “is_admin” from “no” to “yes”.

    ![](media/3f4a1847689fd5adb1784b404694953e.png)

    ![](media/74eab718d97ae070029e1716dd2c6848.png)

3.  Navigate back to the base apktool folder and enter the below command to re-compile the application:

    ./apktool b InsecureBankv2

    ![](media/b4b092d86158679fc7b866d426ddc3da.png)

4.  Copy the InsecureBankv2.apk file generate above into the “dist” folder of SignApk and enter the below command to sign the apk file generated in the previous test.

    java -jar sign.jar InsecureBankv2.apk

    A new sign apk file called InsecureBankv2.s.apk is generated in the same “dist” folder.

    ![](media/3b8d274ae0864b8512460c8322b433ee.png)

5.  Copy the new generated InsecureBankv2.s.apk file into the “platform-tools” folder in the Android SDK and then use the below command to push the newly signed Android-InsecureBankv2 application to the emulator.

    ./adb install InsecureBankv2.s.apk

    ![](media/c54dbc2ed0d1ebf1cde82b95c127c82e.png)

6.  Launch the newly installed InsecureBankv2 application in the Android Emulator. Following screen shows that the user is provided with an additional “Create User” button that is otherwise only available only for the admin user. This button was previously not visible.

    ![](media/56d77bac84d61e788150dfdf05aedc93.png)

7.  Clicking on the “Create User” redirects the user to the user creation module.
